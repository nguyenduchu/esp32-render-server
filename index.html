<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Äá»’ ÃN CHÄ‚N NUÃ”I GÃ€ THÃ”NG MINH</title>
<style>
body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: #f4f6f8;
}
header {
    background: #2c3e50;
    color: white;
    padding: 15px;
    text-align: center;
    font-size: 22px;
    font-weight: bold;
}
nav {
    background: #34495e;
    padding: 10px;
}
nav button {
    background: #3498db;
    border: none;
    color: white;
    padding: 8px 14px;
    margin-right: 5px;
    cursor: pointer;
    border-radius: 4px;
}
.container {
    padding: 20px;
}
.row {
    display: flex;
    gap: 20px;
    margin-bottom: 20px;
}
.card {
    background: white;
    padding: 15px;
    border-radius: 6px;
    flex: 1;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}
.card h3 {
    margin-top: 0;
}
.big {
    font-size: 28px;
    color: #2980b9;
    font-weight: bold;
    text-align: center;
}
.status-ok {
    background: #eafaf1;
    border: 1px solid #2ecc71;
    color: #2ecc71;
    text-align: center;
    padding: 20px;
    font-size: 18px;
}
.controls button {
    padding: 10px;
    margin: 5px;
    width: 120px;
    border: none;
    border-radius: 5px;
    color: white;
    cursor: pointer;
}
.on { background: #27ae60; }
.off { background: #c0392b; }
</style>
</head>

<body>

<header>Äá»’ ÃN CHÄ‚N NUÃ”I GÃ€ THÃ”NG MINH</header>

<nav>
    <button>GiÃ¡m sÃ¡t</button>
    <button>Báº£ng dá»¯ liá»‡u</button>
</nav>

<div class="container">

    <!-- MÃ”I TRÆ¯á»œNG -->
    <div class="row">
        <div class="card">
            <h3>ğŸŒ¡ Nhiá»‡t Ä‘á»™</h3>
            <div class="big" id="temp">0 Â°C</div>
        </div>
        <div class="card">
            <h3>ğŸ’§ Äá»™ áº©m</h3>
            <div class="big" id="humi">0 %</div>
        </div>
    </div>

    <!-- GÃ€ -->
    <div class="card">
        <h3>ğŸ” GÃ  hiá»‡n táº¡i</h3>
        <p>ID: --</p>
        <p><b>0 Kg</b></p>
        <p>Tráº¡ng thÃ¡i: ChÆ°a cÃ³ dá»¯ liá»‡u</p>
    </div>

    <!-- Cáº¢NH BÃO -->
    <div class="card status-ok">
        âœ… Táº¥t cáº£ bÃ¬nh thÆ°á»ng<br>
        KhÃ´ng cÃ³ cáº£nh bÃ¡o nÃ o lÃºc nÃ y
    </div>

    <!-- ÄIá»€U KHIá»‚N TEST -->
    <div class="card">
        <h3>âš™ Äiá»u khiá»ƒn (TEST)</h3>
        <div class="controls">
            <button class="on" onclick="control('gate',1)">Má»Ÿ cá»•ng</button>
            <button class="off" onclick="control('gate',0)">ÄÃ³ng cá»•ng</button>

            <button class="on" onclick="control('pump',1)">Báº­t bÆ¡m</button>
            <button class="off" onclick="control('pump',0)">Táº¯t bÆ¡m</button>

            <button class="on" onclick="control('led',1)">Báº­t Ä‘Ã¨n</button>
            <button class="off" onclick="control('led',0)">Táº¯t Ä‘Ã¨n</button>
        </div>
    </div>

</div>

<script>
const SERVER = "https://esp32-render-server-p8o1.onrender.com";

function loadData() {
    fetch(SERVER + "/data")
        .then(res => res.json())
        .then(data => {
            document.getElementById("temp").innerText = data.temp + " Â°C";
            document.getElementById("humi").innerText = data.humi + " %";
        });
}

function control(device, value) {
    fetch(`${SERVER}/control?${device}=${value}`)
        .then(() => loadData());
}

setInterval(loadData, 2000);
loadData();
</script>

</body>
</html>
